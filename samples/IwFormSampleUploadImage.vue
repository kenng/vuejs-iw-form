<script setup lang='ts'>
///////////////////////////////////////////////@  Import, Types & meta
//////////////////////////////////////////////////////////////////////
import IwFormUploaderConfig from '../utils/IwFormUploaderConfig'
import IwFormConfig from '../utils/IwFormConfig'
import IwForm from '../components/IwForm.vue';


//////////////////////////////////////////////////////@  Props & Emits
//////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////@  Variables
//////////////////////////////////////////////////////////////////////

const config = ref(new IwFormUploaderConfig({
    type: 'image',
    uploadFunc: onUpload,
}))

const myForm: IwFormConfig = new IwFormConfig({
    formGroups: [
        {
            css: 'grid',
            formInputs: [
                {
                    name: 'ImgPath',
                    type: 'uploader',
                    config: config.value,
                }
            ]
        }
    ]
})
/////////////////////////////////////////////////@  Computed & Watches
//////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////@  Functions
//////////////////////////////////////////////////////////////////////
async function onUpload(files?: FileList | null) {
    console.log(files);
    // const endpoint = AppUrl.API_UPLOAD_EVENT_FEATURED_IMAGE(441)
    // const data = new FormData()
    // data.append('image', files![0])
    // const res = await post(endpoint, data) as UploadResponse
    // if (res.url) {
    //     config.value.setImageSrc(res.url)
    // }
}

/////////////////////////////////////////////////////////@  Lifecycles
//////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////@ Initialization
//////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////@  Export & Expose
//////////////////////////////////////////////////////////////////////
</script>

<template>
    <IwForm :myForm="myForm"></IwForm>
</template>

<style scoped>
</style>
